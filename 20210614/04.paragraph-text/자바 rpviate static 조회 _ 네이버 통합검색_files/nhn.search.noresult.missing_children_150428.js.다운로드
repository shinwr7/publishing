/* release date : 2015-04-28 */
nhn=window.nhn||{},nhn.search=nhn.search||{},nhn.search.noresult=nhn.search.noresult||{},nhn.search.noresult.missing_children=nhn.search.noresult.missing_children||{},nhn.search.noresult.missing_children.AddOnToSub=jindo.$Class({_CLASSNAME_BTN_OPENLYMORE:"_btn_openLyMore",_CLASSNAME_BTN_CLOSELYMORE:"_btn_closeLyMore",_CLASSNAME_LY_MORE:"_lyMore",_CLASSNAME_TO_ACTIVATE:"on",$init:function(a,b){this._welBase=jindo.$Element(a);if(!a||a=="undefined"||!this._welBase)return;this.option({sAPI:"",htRequestDefault:{type:"jsonp",method:"get",timeout:3}}),this.option(b),this.option("htRequestOption")&&this._updateRequestOptions(this.option("htRequestOption")),this._welMissingChildren=null,this._oAjax=null,this._bIsBeingRequested=!1,this.option("sAPI")&&this._request()},_updateRequestOptions:function(a){var b=this.option("htRequestDefault");for(var c in a)b[c]=a[c]},_request:function(){var a=this.option("htRequestDefault");a.onload=jindo.$Fn(this._onLoadResponse,this).bind(),a.onerror=jindo.$Fn(this._onLoadError,this).bind(),a.ontimeout=jindo.$Fn(this._onLoadError,this).bind(),this._oAjax=new jindo.$Ajax(this.option("sAPI"),a),this._oAjax.request(),this._bIsBeingRequested=!0},_onLoadResponse:function(a){var b=a.json(),c="";if(!b.html||!(c=jindo.$(b.html)))return this._onLoadError(a);typeof c=="object"&&c.length>0&&(c=c[0]),this._welMissingChildren=this._welBase.after(c),this._attachEvent(this._welMissingChildren),this._clear()},_onLoadError:function(a){this._clear()},_clear:function(){this._welBase.leave(),this._welBase=null,this._oAjax=null},_attachEvent:function(a){a.delegate("click","."+this._CLASSNAME_BTN_OPENLYMORE,jindo.$Fn(function(a){a.stopDefault();var b=jindo.$Element(a.element),c=!b.hasClass(this._CLASSNAME_TO_ACTIVATE),d=b.next(jindo.$Fn(function(a){return jindo.$Element(a).hasClass(this._CLASSNAME_LY_MORE)},this).bind());c?b.addClass(this._CLASSNAME_TO_ACTIVATE):b.removeClass(this._CLASSNAME_TO_ACTIVATE);if(!!d&&d.length>0&&!!d[0]){var e=d[0];c?e.show():e.hide()}},this).bind()),a.delegate("click","."+this._CLASSNAME_BTN_CLOSELYMORE,jindo.$Fn(function(a){a.stopDefault();var b=jindo.$Element(a.element),c=jindo.$Element(b.query("! ."+this._CLASSNAME_LY_MORE));if(!!c){c.hide();var d=c.prev(jindo.$Fn(function(a){return jindo.$Element(a).hasClass(this._CLASSNAME_BTN_OPENLYMORE)},this).bind());if(!!d&&d.length>0&&!!d[0]){var e=d[0];!!e&&e.hasClass(this._CLASSNAME_TO_ACTIVATE)&&e.removeClass(this._CLASSNAME_TO_ACTIVATE)}}},this).bind())}}).extend(jindo.Component)